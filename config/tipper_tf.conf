# Copyright 2025 Manna Harbour
# https://github.com/manna-harbour/miryoku

# Tipper TF Configuration
# Note: Uses old ZMK fork (2023) for OLED support
# ZMK Studio and mouse features are not available on this old fork

# Display/E-Paper configuration
CONFIG_ZMK_DISPLAY=y

# SPI bus and display driver for e-paper (JD79653)
CONFIG_SPI=y
CONFIG_DISPLAY=y

# LVGL graphics library for display rendering
CONFIG_LVGL=y
CONFIG_LVGL_USE_THEME_MONO=y

# Ensure ZMK binds the correct display device (label from tipper_tf.dts)
CONFIG_LVGL_DISPLAY_DEV_NAME="DISPLAY"

# Enable custom widgets from Tipper_TF-Configv3 board definition
CONFIG_CUSTOM_WIDGET_BATTERY_STATUS=y
CONFIG_CUSTOM_WIDGET_OUTPUT_STATUS=y
CONFIG_CUSTOM_WIDGET_PROFILE_STATUS=y

# Disable default ZMK widgets (the outboard custom widgets use the same symbols)
CONFIG_ZMK_WIDGET_BATTERY_STATUS=n
CONFIG_ZMK_WIDGET_OUTPUT_STATUS=n

# Disable sleep to keep display active
CONFIG_ZMK_SLEEP=n

# Display update settings for e-paper
# Use the Tipper TF outboard status screen (avoids duplicate zmk_display_status_screen())
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_BUILT_IN=n
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_CUSTOM=y

# Bluetooth configuration improvements
# Increase transmit power for better range
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Disable PHY 2Mbps for compatibility with Windows/Intel/Realtek chipsets
CONFIG_BT_CTLR_PHY_2M=n

# Enable passkey entry for work-managed Windows computers
CONFIG_ZMK_BLE_PASSKEY_ENTRY=y
