// miryoku/custom_combos.dtsi
// Custom ZMK combos, Miryoku-style (split file).
// Keep this minimal & clean; we'll tune positions after a test build.

#include <dt-bindings/zmk/keys.h>

/ {
    macros {
        macro_hyperkey: macro_hyperkey {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings =
                <&macro_press &kp LSHFT &kp LALT &kp LCTRL &kp LGUI>,
                <&macro_pause_for_release>,
                <&macro_release &kp LSHFT &kp LALT &kp LCTRL &kp LGUI>;
            label = "MACRO_HYPERKEY";
        };
    };

    combos {
        compatible = "zmk,combos";

        // ESC on left thumb combo (Backspace + Enter)
        // Same positions as kludge LEFT combo
        combo_left_thumb_escape {
            timeout-ms = <250>;
            key-positions = <30 31>;
            bindings = <&kp ESC>;
        };

        // Hyper on right thumb combo (Tab + Space)
        // Same positions as kludge RIGHT combo
        combo_right_thumb_hyperkey {
            timeout-ms = <250>;
            key-positions = <32 33>;
            bindings = <&macro_hyperkey>;
        };

        // F13 (leader) at positions 12 + 17
        combo_akimbo_leader {
            timeout-ms = <250>;
            key-positions = <12 17>;
            bindings = <&kp F13>;
        };
    };
};
